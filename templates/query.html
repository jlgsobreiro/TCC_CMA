<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Consulta JSON</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f7f7f7; }
        .container { max-width: 600px; margin: 40px auto; background: #fff; padding: 30px 40px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #333; }
        textarea { width: 100%; height: 120px; border-radius: 4px; border: 1px solid #ccc; padding: 10px; font-family: monospace; }
        button { background: #007bff; color: #fff; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin-top: 10px; }
        button:hover { background: #0056b3; }
        pre { background: #f1f1f1; padding: 15px; border-radius: 4px; margin-top: 20px; overflow-x: auto; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Consulta JSON</h1>
        <form action="/query" method="post">
            <label for="query">Digite sua query JSON:</label>
            <textarea id="query" name="query" required>{{
                request.form.query or
                '{
    "service": "mongodb",
    "database": "test_db",
    "schema": "test",
    "filter": [{"id": "1"}],
    "on_result": {
        "service": "redis",
        "database": "0",
        "filter": [{"value": {"mongodb__test_db__test": "id"}}],
        "on_result": {
            "service": "mysql",
            "database": "test_db",
            "schema": "test",
            "filter": [{"id": {"redis__0": "value"}}]
        }
    }
}'
            }}</textarea>
            <button type="submit">Enviar</button>
        </form>
        {% if result %}
            <h2>Resultado:</h2>
            <pre>{{ result }}</pre>
        {% endif %}
        {% if error %}
            <pre style="color: red;">{{ error }}</pre>
        {% endif %}
    </div>
</body>
</html>